{% extends "base.html" %}
{% block title %}Users - {{ user }}{% endblock %}
{% block content %}
    <form class="container-fluid ms-0 mt-2 mb-5" action="{{ url_for("save_user_changes") }}" method="POST">
        <div class="row mb-2">
            <h3 class="col">Users</h3>
            <div class="col">
                <button type="submit" class="btn btn-warning float-end">
                    Save changes
                </button>
            </div>
        </div>
        <hr>
        <div class="row row-cols-1 row-cols-md-2">
            {% for user in users %}
                <div class="col mt-3">
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col">{{ user.userID }}</div>
                                <div class="col">
                                    <div class="float-end text-muted">{{ user.firstName }} {{ user.lastName }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="card-text col-12 col-xl-4 my-auto"><span class="text-muted">Account Level:</span> {{ user.accountLevel }}</div>
                                <div class="col">
                                    <div class="row">
                                        <label for="accountLevelInput" class="form-label col my-auto text-xl-end">New account level:</label>
                                        <div class="col col-xl-4">
                                            <input type="number" class="form-control float-end" id="accountLevelInput" name="account_level_{{ user.userID }}" placeholder="0-10" pattern="\d*" min="0" max="10">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="row">
                                <div class="col">
                                    <a type="button"
                                        {% if user.accountLevel < 10 %}
                                            class="btn btn-outline-danger float-end"
                                            href="{{ url_for("delete_user", user_id=user.userID) }}"
                                        {% else %}
                                            class="btn btn-outline-secondary float-end disabled"
                                        {% endif %}
                                    >Delete user</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </form>
{% endblock content %}
